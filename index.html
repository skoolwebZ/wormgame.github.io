<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Slither.io By Josh J</title>
<style>
    body { margin:0; overflow:hidden; background:#111; }
    canvas { display:block; background:#222; }
</style>
</head>
<body>
<canvas id="game"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let snake = [{x: canvas.width/2, y: canvas.height/2}];
let segments = [];
let snakeLength = 100; // initial segments
let speed = 2.5;
let angle = 0;
let targetAngle = 0;

let food = [];
for(let i=0;i<50;i++){
    food.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height});
}

const keys = {};

// Controls WASD
window.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
window.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

function distance(a,b){ return Math.hypot(a.x-b.x, a.y-b.y); }

function gameLoop(){
    // Update angle based on keys
    if(keys['w']) targetAngle = -Math.PI/2;
    if(keys['s']) targetAngle = Math.PI/2;
    if(keys['a']) targetAngle = Math.PI;
    if(keys['d']) targetAngle = 0;

    // Smooth turning
    let diff = targetAngle - angle;
    if(diff > Math.PI) diff -= Math.PI*2;
    if(diff < -Math.PI) diff += Math.PI*2;
    angle += diff*0.1;

    // Move head
    let head = {x: snake[0].x + Math.cos(angle)*speed, y: snake[0].y + Math.sin(angle)*speed};
    snake.unshift(head);

    // Smooth growth
    while(snake.length > snakeLength) snake.pop();

    // Check food collision
    for(let i=food.length-1;i>=0;i--){
        if(distance(head, food[i]) < 15){
            snakeLength += 2; // smooth growth
            food[i] = {x:Math.random()*canvas.width, y:Math.random()*canvas.height};
        }
    }

    // Check self collision
    for(let i=10;i<snake.length;i++){
        if(distance(head, snake[i]) < 10){
            snakeLength = 100;
            snake = [{x: canvas.width/2, y: canvas.height/2}];
            angle = 0;
            targetAngle = 0;
        }
    }

    // Draw
    ctx.fillStyle = '#222';
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Draw food
    ctx.fillStyle = 'red';
    food.forEach(f=>{
        ctx.beginPath();
        ctx.arc(f.x,f.y,10,0,Math.PI*2);
        ctx.fill();
    });

    // Draw snake
    for(let i=0;i<snake.length;i++){
        ctx.fillStyle = `hsl(${i*2%360},100%,50%)`; // colorful gradient
        ctx.beginPath();
        ctx.arc(snake[i].x, snake[i].y, 10, 0, Math.PI*2);
        ctx.fill();
    }

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
